# SPDX-FileCopyrightText: 2025-2026 The Heat Pump Mining Authors, see AUTHORS.md
#
# SPDX-License-Identifier: Apache-2.0

Bootstrap: docker
From: ubuntu:rolling

%files
  build/jpackage/heat-pump-mining_0.0.0_amd64.deb /

  scripts/evaluate-revision-score.sh /usr/local/bin/evaluate-revision-score

  scripts/evaluate-from-database.sh /usr/local/bin/evaluate-db
  scripts/evaluate-from-database.sh /usr/local/bin/evaluate-db
  scripts/evaluate-from-automaton.sh /usr/local/bin/evaluate-dot
  scripts/evaluate-from-loop.sh /usr/local/bin/evaluate-loop
  scripts/evaluate-from-toy-heat-pump.sh /usr/local/bin/evaluate-toy
  scripts/learn.sh /usr/local/bin/learn

%post
  export DEBIAN_FRONTEND=noninteractive
  apt-get update
  apt-get install -y --no-install-recommends ./heat-pump-mining_0.0.0_amd64.deb csvkit gawk jq
  rm -rf /heat-pump-mining_0.0.0_amd64.deb /var/lib/apt/lists/*

  ln -s /opt/heat-pump-mining/bin/heat-pump-mining /usr/local/bin
